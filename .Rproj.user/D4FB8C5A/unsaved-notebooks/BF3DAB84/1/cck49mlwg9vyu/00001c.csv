"0","#计算距离函数。"
"0","#type = c(""O"", ""I"", ""F"", ""M"", ""2"")"
"0","distance<-function(train_data,obse,type)"
"0","{"
"0","	r<-nrow(train_data)"
"0","	near_distance<-matrix(nrow=r,ncol=1)"
"0","	for(i in 1:r){"
"0","		near_distance[i]<-norm(cbind(train_data[i,]-obse),type)#zhao		"
"0","	}"
"0","	return (near_distance)"
"0","}"
"0",""
"0","#计算与所有的训练集之间的距离关系"
"0","knn<-function(train_data,obse,type,calcols,classcol,idcol)"
"0","{"
"0","	d<-distance(train_data[,calcols],obse,type)"
"0","	m <- data.frame(train_data[,idcol],train_data[,classcol],d)"
"0","	return(m)"
"0","}"
"0","#用knn来预测点属于的类别"
"0","#train_data  训练集matrix格式"
"0","#obse	     要预测对象"
"0","#type        计算距离采用的范数类型"
"0","#calcols     那些列参与计算距离"
"0","#classcol    类别标志类"
"0","#idcol       唯一标识每个训练对象的列"
"0","#k           k邻近里面的k值"
"0","knn_classi<-function(train_data,obse,type,calcols,classcol,idcol,k)"
"0","{"
"0","		all_near<-knn(train_data,obse,type,calcols,classcol,idcol)"
"0","		all_near<-all_near[order(all_near[,3]),]"
"0","		r<-nrow(all_near)"
"0","		cla<-unique(all_near[,2])"
"0","		probs<-matrix(cla,ncol=2,nrow=length(cla),byrow=FALSE)"
"0","		k_nearest<-all_near[1:k,]"
"0","		freqs<-as.data.frame(table(k_nearest[,2]))"
"0","		freqs[,2]<-freqs[,2]/k"
"0","		#probs[,2]=probs[,2]/k"
"0","		colnames(freqs)<-c(""class"",""probs"")"
"0","		freqs<-freqs[order(freqs[,2],decreasing = TRUE),]"
"0","		return (freqs[1,])"
"0","}"
"0","knn_classi(iris,c(11,22),'2',c(2:3),4,1,5)#c(121,203)"
